<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Matrix Profile Computation — stamp • matrixprofiler</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Matrix Profile Computation — stamp" />
<meta property="og:description" content="STAMP Computes the best so far Matrix Profile and Profile Index for Univariate Time Series.
STOMP is a faster implementation with the caveat that is not anytime as STAMP or SCRIMP.
SCRIMP is a faster implementation, like STOMP, but has the ability to return anytime results as STAMP.
MPX is by far the fastest implementation with the caveat that is not anytime as STAMP or SCRIMP." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">matrixprofiler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.7.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/matrix-profile-foundation/matrixprofiler/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Matrix Profile Computation</h1>
    <small class="dont-index">Source: <a href='https://github.com/matrix-profile-foundation/matrixprofiler/blob/master/R/stamp.R'><code>R/stamp.R</code></a>, <a href='https://github.com/matrix-profile-foundation/matrixprofiler/blob/master/R/stomp.R'><code>R/stomp.R</code></a>, <a href='https://github.com/matrix-profile-foundation/matrixprofiler/blob/master/R/scrimp.R'><code>R/scrimp.R</code></a>, and 1 more</small>
    <div class="hidden name"><code>mp_algos.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>STAMP Computes the best so far Matrix Profile and Profile Index for Univariate Time Series.</p>
<p>STOMP is a faster implementation with the caveat that is not anytime as STAMP or SCRIMP.</p>
<p>SCRIMP is a faster implementation, like STOMP, but has the ability to return anytime results as STAMP.</p>
<p>MPX is by far the fastest implementation with the caveat that is not anytime as STAMP or SCRIMP.</p>
    </div>

    <pre class="usage"><span class='fu'>stamp</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>window_size</span>,
  query <span class='op'>=</span> <span class='cn'>NULL</span>,
  exclusion_zone <span class='op'>=</span> <span class='fl'>0.5</span>,
  s_size <span class='op'>=</span> <span class='fl'>1</span>,
  n_workers <span class='op'>=</span> <span class='fl'>1</span>,
  progress <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='fu'>stomp</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>window_size</span>,
  query <span class='op'>=</span> <span class='cn'>NULL</span>,
  exclusion_zone <span class='op'>=</span> <span class='fl'>0.5</span>,
  n_workers <span class='op'>=</span> <span class='fl'>1</span>,
  progress <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='fu'>scrimp</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>window_size</span>,
  query <span class='op'>=</span> <span class='cn'>NULL</span>,
  exclusion_zone <span class='op'>=</span> <span class='fl'>0.5</span>,
  s_size <span class='op'>=</span> <span class='fl'>1</span>,
  pre_scrimp <span class='op'>=</span> <span class='fl'>0.25</span>,
  n_workers <span class='op'>=</span> <span class='fl'>1</span>,
  progress <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='fu'>mpx</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>window_size</span>,
  query <span class='op'>=</span> <span class='cn'>NULL</span>,
  exclusion_zone <span class='op'>=</span> <span class='fl'>0.5</span>,
  s_size <span class='op'>=</span> <span class='fl'>1</span>,
  idxs <span class='op'>=</span> <span class='cn'>TRUE</span>,
  distance <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"euclidean"</span>, <span class='st'>"pearson"</span><span class='op'>)</span>,
  n_workers <span class='op'>=</span> <span class='fl'>1</span>,
  progress <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Required. Any 1-dimension series of numbers (<code>matrix</code>, <code>vector</code>, <code>ts</code> etc.) (See details).</p></td>
    </tr>
    <tr>
      <th>window_size</th>
      <td><p>Required. An integer defining the rolling window size.</p></td>
    </tr>
    <tr>
      <th>query</th>
      <td><p>(not yet on <code>scrimp()</code>) Optional. Another 1-dimension series of numbers for an AB-join similarity.
Default is <code>NULL</code> (See details).</p></td>
    </tr>
    <tr>
      <th>exclusion_zone</th>
      <td><p>A numeric. Defines the size of the area around the rolling window that will be ignored to avoid
trivial matches. Default is <code>0.5</code>, i.e., half of the <code>window_size</code>.</p></td>
    </tr>
    <tr>
      <th>s_size</th>
      <td><p>A numeric. Used on anytime algorithms (stamp, scrimp, mpx) if only part of the computation is needed.
Default is <code>1.0</code> (means 100%).</p></td>
    </tr>
    <tr>
      <th>n_workers</th>
      <td><p>An integer. The number of threads using for computing. Defaults to <code>1</code>.</p></td>
    </tr>
    <tr>
      <th>progress</th>
      <td><p>A logical. If <code>TRUE</code> (the default) will show a progress bar. Useful for long computations. (See
details)</p></td>
    </tr>
    <tr>
      <th>pre_scrimp</th>
      <td><p>A numeric. If not zero, pre_scrimp is computed, using a fraction of the data. Default is <code>0.25</code>.
This parameter is ignored when using multithread or AB-join.</p></td>
    </tr>
    <tr>
      <th>idxs</th>
      <td><p>(<code>mpx()</code> only) A logical. Specifies if the computation will return the Profile Index or not. Defaults to
<code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>distance</th>
      <td><p>(<code>mpx()</code> only) A string. Currently accepts <code>euclidean</code> and <code>pearson</code>. Defaults to <code>euclidean</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a <code>list</code> with the <code>matrix_profile</code>, <code>profile_index</code> (if <code>idxs</code> is <code>TRUE</code> in <code>mpx()</code>), and some
information about the settings used to build it, like <code>ez</code> and <code>partial</code> when the algorithm is finished early.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The Matrix Profile, has the potential to revolutionize time series data mining because of its generality,
versatility, simplicity and scalability. In particular it has implications for time series motif discovery, time
series joins, shapelet discovery (classification), density estimation, semantic segmentation, visualization, rule
discovery, clustering etc.</p>
<p><code>progress</code>, it is really recommended to use it as feedback for long computations. It indeed adds some
(neglectable) overhead, but the benefit of knowing that your computer is still computing is much bigger than the
seconds you may lose in the final benchmark. About <code>n_workers</code>, for Windows systems, this package uses TBB for
multithreading, and Linux and macOS, use TinyThread++. This may or not raise some issues in the future, so we must be
aware of slower processing due to different mutexes implementations or even unexpected crashes. The Windows version
is usually more reliable. The <code>data</code> and <code>query</code> parameters will be internally converted to a single vector using
<code><a href='https://rdrr.io/r/base/numeric.html'>as.numeric()</a></code>, thus, bear in mind that a multidimensional matrix may not work as you expect, but most 1-dimensional
data types will work normally. If <code>query</code> is provided, expect the same pre-procesment done for <code>data</code>; in addition,
<code>exclusion_zone</code> will be ignored and set to <code>0</code>. Both <code>data</code> and <code>query</code> doesn't need to have the same size and they
can be interchanged if both are provided. The difference will be in the returning object. AB-Join returns the Matrix
Profile 'A' and 'B' i.e., the distance between a rolling window from query to data and from data to query.</p>
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>stamp</h3>


<p>The anytime STAMP computes the Matrix Profile and Profile Index in such manner that it can be stopped before its
complete calculation and return the best so far results allowing ultra-fast approximate solutions.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>stomp</h3>


<p>The STOMP uses a faster implementation to compute the Matrix Profile and Profile Index. It can be stopped earlier by
the user, but the result is not considered anytime, just incomplete. For a anytime algorithm, use <code>stamp()</code> or
<code>scrimp()</code>.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>scrimp</h3>


<p>The SCRIMP algorithm was the anytime solution for stomp. It is as fast as stomp but allows the user to cancel the
computation and get an approximation of the final result. This implementation uses the SCRIMP++ code. This means
that, at first, it will compute the pre-scrimp (a very fast and good approximation), and continue improving with
scrimp. The exception is if you use multithreading, that skips the pre-scrimp stage.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>mpx</h3>


<p>This algorithm was developed apart from the main Matrix Profile branch that relies on Fast Fourier Transform (FFT) at
least in one part of the process. This algorithm doesn't use FFT at all and is several times faster. It also relies
on Ogita's work for better precision computing mean and standard deviation (part of the process).</p>

    <h2 class="hasAnchor" id="this-document"><a class="anchor" href="#this-document"></a>This document</h2>

    <p>Last updated on 2021-11-23 using R version 4.1.2.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ul>
<li><p>Yeh CCM, Zhu Y, Ulanova L, Begum N, Ding Y, Dau HA, et al. Matrix profile I: All pairs similarity joins
for time series: A unifying view that includes motifs, discords and shapelets. Proc - IEEE Int Conf Data Mining,
ICDM. 2017;1317-22.</p></li>
</ul>

<ul>
<li><p>Zhu Y, Imamura m, Nikovski D, Keogh E. Matrix Profile VII: Time Series Chains: A New Primitive for Time
Series Data Mining. Knowl Inf Syst. 2018 Jun 2;1-27.</p></li>
</ul>

<ul>
<li><p>Zhu Y, Zimmerman Z, Senobari NS, Yeh CM, Funning G. Matrix Profile II : Exploiting a Novel Algorithm
and GPUs to Break the One Hundred Million Barrier for Time Series Motifs and Joins. Icdm. 2016 Jan 22;54(1):739-48.</p></li>
</ul>

<p>Website: <a href='http://www.cs.ucr.edu/~eamonn/MatrixProfile.html'>http://www.cs.ucr.edu/~eamonn/MatrixProfile.html</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='mass.html'>mass()</a></code> for the underlying algorithm that finds best match of a query.</p>
<p><code>mpxab()</code> for the forward and reverse join-similarity.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='va'>mp</span> <span class='op'>&lt;-</span> <span class='fu'>stamp</span><span class='op'>(</span><span class='va'>motifs_discords_small</span>, <span class='fl'>50</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mp</span> <span class='op'>&lt;-</span> <span class='fu'>stomp</span><span class='op'>(</span><span class='va'>motifs_discords_small</span>, <span class='fl'>50</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mp</span> <span class='op'>&lt;-</span> <span class='fu'>scrimp</span><span class='op'>(</span><span class='va'>motifs_discords_small</span>, <span class='fl'>50</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mp</span> <span class='op'>&lt;-</span> <span class='fu'>mpx</span><span class='op'>(</span><span class='va'>motifs_discords_small</span>, <span class='fl'>50</span><span class='op'>)</span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Francisco Bischoff.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


